{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_KEY = '54673230-281fb694487da15dcd571070d';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\n\r\naxios.defaults.baseURL = BASE_URL;\r\n\r\nexport async function getImagesByQuery(query, page = 1) {\r\n  const response = await axios.get('', {\r\n    params: {\r\n      key: API_KEY,\r\n      q: query,\r\n      image_type: 'photo',\r\n      orientation: 'horizontal',\r\n      safesearch: true,\r\n      page: page,\r\n      per_page: 15,\r\n    },\r\n  });\r\n\r\n  return response.data;\r\n}\r\n","import SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\nconst gallery = document.querySelector('.gallery');\r\nconst loaderText = document.querySelector('.loader-text');\r\n\r\nconst lightbox = new SimpleLightbox('.gallery a', {\r\n  captionsData: 'alt',\r\n  captionDelay: 250,\r\n});\r\n\r\nexport function createGallery(images) {\r\n  const markup = images\r\n    .map(\r\n      image => `\r\n      <li class=\"gallery-item\">\r\n        <a href=\"${image.largeImageURL}\">\r\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\r\n        </a>\r\n        <div class=\"info\">\r\n          <p><b>Likes</b>${image.likes}</p>\r\n          <p><b>Views</b>${image.views}</p>\r\n          <p><b>Comments</b>${image.comments}</p>\r\n          <p><b>Downloads</b>${image.downloads}</p>\r\n        </div>\r\n      </li>\r\n    `\r\n    )\r\n    .join('');\r\n\r\n  gallery.insertAdjacentHTML('beforeend', markup);\r\n  lightbox.refresh();\r\n}\r\n\r\nexport function clearGallery() {\r\n  gallery.innerHTML = '';\r\n}\r\n\r\nexport function showLoader() {\r\n  loaderText.classList.remove('hidden');\r\n}\r\n\r\nexport function hideLoader() {\r\n  loaderText.classList.add('hidden');\r\n}\r\n","import iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport { getImagesByQuery } from './js/pixabay-api.js';\r\nimport {\r\n  createGallery,\r\n  clearGallery,\r\n  showLoader,\r\n  hideLoader,\r\n} from './js/render-functions.js';\r\n\r\nconst form = document.querySelector('.form');\r\nconst loadMoreBtn = document.querySelector('.load-more');\r\n\r\nlet currentQuery = '';\r\nlet currentPage = 1;\r\nlet totalHits = 0;\r\n\r\nform.addEventListener('submit', async event => {\r\n  event.preventDefault();\r\n\r\n  const query = event.currentTarget.elements['search-text'].value.trim();\r\n\r\n  if (!query) {\r\n    iziToast.warning({\r\n      message: 'Please enter a search query!',\r\n      position: 'bottomCenter',\r\n    });\r\n    return;\r\n  }\r\n\r\n  currentQuery = query;\r\n  currentPage = 1;\r\n\r\n  clearGallery();\r\n  loadMoreBtn.classList.add('hidden');\r\n  showLoader();\r\n\r\n  try {\r\n    const data = await getImagesByQuery(currentQuery, currentPage);\r\n\r\n    totalHits = data.totalHits;\r\n\r\n    if (data.hits.length === 0) {\r\n      iziToast.info({\r\n        message: \"We're sorry, we couldn't find any images.\",\r\n        position: 'bottomCenter',\r\n      });\r\n      return;\r\n    }\r\n\r\n    createGallery(data.hits);\r\n\r\n    if (totalHits > 15) {\r\n      loadMoreBtn.classList.remove('hidden');\r\n    }\r\n  } catch (error) {\r\n    iziToast.error({\r\n      message: 'Error fetching images.',\r\n      position: 'bottomCenter',\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n});\r\n\r\nloadMoreBtn.addEventListener('click', async () => {\r\n  currentPage += 1;\r\n\r\n  showLoader();\r\n  loadMoreBtn.classList.add('hidden');\r\n\r\n  try {\r\n    const data = await getImagesByQuery(currentQuery, currentPage);\r\n\r\n    createGallery(data.hits);\r\n\r\n    const totalLoaded = currentPage * 15;\r\n\r\n    if (totalLoaded >= totalHits) {\r\n      iziToast.info({\r\n        message: \"We're sorry, but you've reached the end of search results.\",\r\n        position: 'bottomCenter',\r\n      });\r\n      loadMoreBtn.classList.add('hidden');\r\n    } else {\r\n      loadMoreBtn.classList.remove('hidden');\r\n    }\r\n  } catch (error) {\r\n    iziToast.error({\r\n      message: 'Error loading more images.',\r\n      position: 'bottomCenter',\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n});\r\n\r\n\r\n"],"names":["API_KEY","BASE_URL","axios","getImagesByQuery","query","page","gallery","loaderText","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","form","loadMoreBtn","currentQuery","currentPage","totalHits","event","iziToast","data"],"mappings":"wyBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEjBC,EAAM,SAAS,QAAUD,EAElB,eAAeE,EAAiBC,EAAOC,EAAO,EAAG,CAatD,OAZiB,MAAMH,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,IAAKF,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACL,CAAG,GAEe,IAClB,CClBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAa,SAAS,cAAc,cAAc,EAElDC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACCE,GAAS;AAAA;AAAA,mBAEIA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,2BAGjCA,EAAM,KAAK;AAAA,2BACXA,EAAM,KAAK;AAAA,8BACRA,EAAM,QAAQ;AAAA,+BACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAIzC,EACA,KAAK,EAAE,EAEVP,EAAQ,mBAAmB,YAAaM,CAAM,EAC9CJ,EAAS,QAAO,CAClB,CAEO,SAASM,GAAe,CAC7BR,EAAQ,UAAY,EACtB,CAEO,SAASS,GAAa,CAC3BR,EAAW,UAAU,OAAO,QAAQ,CACtC,CAEO,SAASS,GAAa,CAC3BT,EAAW,UAAU,IAAI,QAAQ,CACnC,CClCA,MAAMU,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAe,GACfC,EAAc,EACdC,EAAY,EAEhBJ,EAAK,iBAAiB,SAAU,MAAMK,GAAS,CAC7CA,EAAM,eAAc,EAEpB,MAAMlB,EAAQkB,EAAM,cAAc,SAAS,aAAa,EAAE,MAAM,OAEhE,GAAI,CAAClB,EAAO,CACVmB,EAAS,QAAQ,CACf,QAAS,+BACT,SAAU,cAChB,CAAK,EACD,MACD,CAEDJ,EAAef,EACfgB,EAAc,EAEdN,IACAI,EAAY,UAAU,IAAI,QAAQ,EAClCH,IAEA,GAAI,CACF,MAAMS,EAAO,MAAMrB,EAAiBgB,EAAcC,CAAW,EAI7D,GAFAC,EAAYG,EAAK,UAEbA,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,KAAK,CACZ,QAAS,4CACT,SAAU,cAClB,CAAO,EACD,MACD,CAEDb,EAAcc,EAAK,IAAI,EAEnBH,EAAY,IACdH,EAAY,UAAU,OAAO,QAAQ,CAExC,MAAe,CACdK,EAAS,MAAM,CACb,QAAS,yBACT,SAAU,cAChB,CAAK,CACL,QAAY,CACRP,GACD,CACH,CAAC,EAEDE,EAAY,iBAAiB,QAAS,SAAY,CAChDE,GAAe,EAEfL,IACAG,EAAY,UAAU,IAAI,QAAQ,EAElC,GAAI,CACF,MAAMM,EAAO,MAAMrB,EAAiBgB,EAAcC,CAAW,EAE7DV,EAAcc,EAAK,IAAI,EAEHJ,EAAc,IAEfC,GACjBE,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,cAClB,CAAO,EACDL,EAAY,UAAU,IAAI,QAAQ,GAElCA,EAAY,UAAU,OAAO,QAAQ,CAExC,MAAe,CACdK,EAAS,MAAM,CACb,QAAS,6BACT,SAAU,cAChB,CAAK,CACL,QAAY,CACRP,GACD,CACH,CAAC"}